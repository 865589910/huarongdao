# LeanCloud 在线排行榜配置说明

## ✅ 已完成的修改

1. ✅ 在 `index.html` 中引入了 LeanCloud SDK
2. ✅ 在 `game.js` 中集成了云端数据存储
3. ✅ 支持全球排行榜互通

---

## 📋 配置步骤（请按顺序操作）

### 第1步：注册 LeanCloud 账号

1. 访问：https://console.leancloud.cn/
2. 点击右上角"注册"
3. 填写信息完成注册
4. **完成实名认证**（需要身份证，5-10分钟）

### 第2步：创建应用

1. 登录后，点击"创建应用"
2. 填写：
   - **应用名称**：`数学华容道`（或任意名称）
   - **开发版**：选择"开发版"（免费）
3. 点击"创建"

### 第3步：创建数据表

1. 进入应用 → 点击左侧"数据存储" → "结构化数据"
2. 点击"创建 Class"
3. 填写：
   - **Class 名称**：`Leaderboard`（必须是这个名字！）
   - **Class 访问权限**：保持默认
4. 点击"创建"

### 第4步：获取密钥

1. 点击左侧"设置" → "应用凭证"
2. 找到以下信息：
   ```
   AppID：xxxxxxxxxx
   AppKey：xxxxxxxxxx
   服务器地址：https://xxxxxx.lc-cn-n1-shared.com
   ```
3. **复制这三个值**

### 第5步：填入代码

1. 打开文件：`game.js`
2. 找到文件开头的配置部分（第1-12行）：

```javascript
// LeanCloud 配置（请替换为您的 AppID 和 AppKey）
const LEANCLOUD_CONFIG = {
    appId: '请替换为您的AppID',           // 👈 替换这里
    appKey: '请替换为您的AppKey',         // 👈 替换这里
    serverURL: 'https://please-replace-with-your-customized.domain.com' // 👈 替换这里
};
```

3. 将刚才复制的值替换进去，例如：

```javascript
const LEANCLOUD_CONFIG = {
    appId: 'abc123xyz789',
    appKey: 'def456uvw012',
    serverURL: 'https://abc123.lc-cn-n1-shared.com'
};
```

4. **保存文件**

### 第6步：上传到网站

1. 将修改后的三个文件上传到 Netlify 或 Gitee Pages：
   - `index.html`
   - `style.css`
   - `game.js`

2. 访问网站测试

---

## 🎯 测试是否配置成功

### 测试步骤：

1. 在手机A上打开游戏
2. 完成挑战，输入姓名"张三"，提交成绩
3. 看到"成绩已提交到云端！全球排行榜已更新！" ✅
4. 在手机B上打开游戏
5. 点击"查看排行榜"
6. 应该能看到"张三"的成绩 ✅

### 如果看不到：

**检查清单：**
- [ ] 确认已完成实名认证
- [ ] 确认 Class 名称是 `Leaderboard`（区分大小写）
- [ ] 确认 AppID、AppKey、serverURL 都填对了
- [ ] 打开浏览器开发者工具（F12）查看是否有报错
- [ ] 检查网络连接

---

## 📊 在 LeanCloud 后台查看数据

1. 登录 LeanCloud 控制台
2. 进入应用 → 数据存储 → Leaderboard
3. 可以看到所有学生提交的成绩
4. 可以导出Excel表格

---

## 💡 功能说明

### 现在的工作方式：

1. **提交成绩时**：
   - ✅ 同时保存到云端（所有人可见）
   - ✅ 同时保存到本地（作为备份）
   - ✅ 提示"成绩已提交到云端"

2. **查看排行榜时**：
   - ✅ 优先从云端加载（最新数据）
   - ✅ 如果网络失败，自动切换到本地数据
   - ✅ 显示前100名

3. **限制机制**：
   - ✅ 每个设备仍然只能提交一次
   - ✅ 但所有设备的排行榜都是互通的

---

## 🔧 常见问题

### Q1: 提示"提交失败，请检查网络连接"
**A:** 检查 AppID、AppKey、serverURL 是否填写正确

### Q2: 排行榜显示"加载失败"
**A:** 可能是网络问题，会自动切换到本地数据

### Q3: 想清空所有成绩重新开始
**A:** 
1. 进入 LeanCloud 控制台
2. 数据存储 → Leaderboard
3. 选中所有数据，点击删除

### Q4: 免费版有限制吗？
**A:** 
- 每天免费请求 30,000 次
- 存储空间 1GB
- 对于学校比赛完全够用

---

## 📞 需要帮助？

如果配置过程中遇到问题：
1. 检查浏览器控制台（F12）的错误信息
2. 截图发给我
3. 我会帮您排查问题

---

**祝配置顺利！🎉**
